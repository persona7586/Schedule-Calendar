{% extends "base.html" %}

{% block title %}Home – Schedule App{% endblock %}

{% block content %}
  <!-- 메인 페이지 헤더와 버튼 -->
  <div class="my-4 text-center">
    <h2>사용 기능</h2>
    <div class="d-flex justify-content-center gap-2 mt-3">
      <!-- 달력 페이지로 -->
      <a href="{% url 'calendar' %}"
         target="_blank"
         class="btn btn-primary btn-lg">
        Schedule-Calendar
      </a>
      <!-- 자동 자막 추출 새 창 열기 -->
      <a href="{% url 'auto_subtitle' %}"
         class="btn btn-secondary btn-lg">
        자동 자막 추출
      </a>
    </div>
  </div>

   <!-- ↓ 여기부터 메모 섹션 -->
  <div class="row mt-5">
  <div class="col-md-8">
  <div class="card p-3 mb-3">
    <h4>일정 메모</h4>

    <!-- 메모 추가 폼 -->
    <form method="post" class="mb-3">
          {% csrf_token %}
          <div class="input-group mb-2">
            <input type="text"
                   name="title"
                   class="form-control"
                   placeholder="메모 제목"
                   required>
          </div>
          <textarea name="content"
                    class="form-control mb-2"
                    rows="3"
                    placeholder="세부 내용"
                    required></textarea>
          <button type="submit" class="btn btn-success">메모 추가</button>
    </form>

    <!-- 메모 리스트 -->
    <div class="list-group">
          {% for memo in memos %}
            <a href="{% url 'memo_detail' memo.id %}"
               class="list-group-item list-group-item-action">
              {{ forloop.counter }}. {{ memo.title }}
            </a>
          {% empty %}
            <p class="text-muted">등록된 메모가 없습니다.</p>
          {% endfor %}
    </div>
  </div>
  </div>

    <!-- 오른쪽: 즐겨찾기 -->
    <div class="col-md-4">
      <div class="card p-3 mb-3">
        <h4>즐겨찾기</h4>
        <form method="post" action="{% url 'add_bookmark' %}" class="mb-3">
          {% csrf_token %}
          <div class="input-group mb-2">
            <input type="text"
                   name="bookmark_name"
                   class="form-control"
                   placeholder="링크 이름"
                   required>
          </div>
          <input type="url"
                 name="bookmark_url"
                 class="form-control mb-2"
                 placeholder="https://example.com"
                 required>
          <button type="submit" class="btn btn-primary">추가</button>
        </form>
        <div class="list-group">
          {% for bm in bookmarks %}
            <div class="d-flex align-items-center mb-1">
              <a href="{{ bm.url }}"
                 target="_blank"
                 class="list-group-item list-group-item-action d-flex align-items-center">
                <!-- ① 파비콘 출력 -->
                <img
                    src="https://www.google.com/s2/favicons?domain_url={{ bm.url }}"
                    width="20" height="20"
                    class="me-2"
                    alt="{{ bm.name }} 로고"
                >

                <!-- ② 링크 텍스트 -->
                {{ forloop.counter }}. {{ bm.name }}
              </a>
              <form method="post"
                    action="{% url 'delete_bookmark' bm.id %}"
                    style="margin:0;">
                {% csrf_token %}
                <button type="submit"
                        class="btn btn-outline-danger btn-sm ms-1">×</button>
              </form>
            </div>
          {% empty %}
            <p class="text-muted">등록된 즐겨찾기가 없습니다.</p>
          {% endfor %}
        </div>
      </div>
    </div>

  </div>
{% endblock %}